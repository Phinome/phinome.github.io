<h1 id="Autoprefixer_Core">Autoprefixer Core <a href="https://travis-ci.org/postcss/autoprefixer-core"><img src="https://travis-ci.org/postcss/autoprefixer-core.svg" alt="Build Status"></a></h1><p><img align="right" width="94" height="71" src="http://postcss.github.io/autoprefixer/logo.svg" title="Autoprefixer logo by Anton Lovchikov"></p>
<p><a href="https://github.com/postcss/postcss">PostCSS</a> plugin to parse CSS and add vendor prefixes using values<br>from <a href="http://caniuse.com/">Can I Use</a>.</p>
<p>This is core package to build Autoprefixer plugin for some environment<br>(like <a href="https://github.com/nDmitry/grunt-autoprefixer">grunt‑autoprefixer</a>). For end-user documentation, features<br>and plugins list visit <a href="https://github.com/postcss/autoprefixer">main Autoprefixer</a> project.</p>
<p><a href="https://evilmartians.com/?utm_source=autoprefixer-core"><br><img src="https://evilmartians.com/badges/sponsored-by-evil-martians.svg" alt="Sponsored by Evil Martians" width="236" height="54"><br></a></p>
<h2 id="Quick_Example">Quick Example</h2><p>Write your CSS rules without vendor prefixes (in fact, forget about them<br>entirely):</p>
<pre><code class="css"><span class="pseudo">:fullscreen</span> <span class="tag">a</span> <span class="rules">{
    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex
}</span></span></span>
</code></pre>
<p>Process your CSS by Autoprefixer:</p>
<pre><code class="js"><span class="keyword">var</span> autoprefixer = <span class="built_in">require</span>(<span class="string">'autoprefixer-core'</span>);
<span class="keyword">var</span> prefixed = autoprefixer.process(css).css;
</code></pre>
<p>It will use the data based on current browser popularity and property support<br>to apply prefixes for you:</p>
<pre><code class="css"><span class="pseudo">:-webkit-full-screen</span> <span class="tag">a</span> <span class="rules">{
    <span class="rule"><span class="attribute">display</span>:<span class="value"> -webkit-box</span></span>;
    <span class="rule"><span class="attribute">display</span>:<span class="value"> -webkit-flex</span></span>;
    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex
}
:-moz-full-screen a {
    display: flex
}
:-ms-fullscreen a {
    display: -ms-flexbox</span></span>;
    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex
}
:fullscreen a {
    display: -webkit-box</span></span>;
    <span class="rule"><span class="attribute">display</span>:<span class="value"> -webkit-flex</span></span>;
    <span class="rule"><span class="attribute">display</span>:<span class="value"> -ms-flexbox</span></span>;
    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex
}</span></span></span>
</code></pre>
<h2 id="Usage">Usage</h2><p>To process your CSS you need to make 2 steps:</p>
<ol>
<li>Build processor for your options and browsers supported in your project.</li>
<li>Process CSS through this processor.</li>
</ol>
<p>Function <code>autoprefixer(options)</code> returns new processor object:</p>
<pre><code class="js"><span class="keyword">var</span> processor = autoprefixer({ browsers: [<span class="string">'&gt; 1%'</span>, <span class="string">'IE 7'</span>], cascade: <span class="literal">false</span> });
</code></pre>
<p>There are 2 options:</p>
<ul>
<li><code>browsers</code> (array): list of browsers, which are supported in your project.<br>You can directly specify browser version (like <code>iOS 7</code>) or use selections<br>(like <code>last 2 version</code> or <code>&gt; 5%</code>). See <a href="https://github.com/ai/browserslist">Browserslist docs</a> for available<br>queries and default value.</li>
<li><code>cascade</code> (boolean): should Autoprefixer uses <a href="https://github.com/postcss/autoprefixer#visual-cascade">Visual Cascade</a>,<br>if CSS will be uncompressed.</li>
</ul>
<p>Processor object had:</p>
<ul>
<li><code>.process(css, opts)</code> method, which will add prefixes to <code>css</code>.</li>
<li><code>.info()</code> method, which returns debug information: which browsers are selected<br>and which properties will be prefixed</li>
<li><code>.postcss</code> property returns <a href="https://github.com/postcss/postcss">PostCSS</a> processor to use in chain<br>with other <a href="https://github.com/postcss/postcss#built-with-postcss">PostCSS processors</a>.</li>
</ul>
<p>You can use processor object to process several CSS files<br>to increase perfomance.</p>
<p>There are <code>autoprefixer.process()</code>, <code>autoprefixer.info()</code><br>and <code>autoprefixer.postcss</code> shortcuts, which use default browsers and options.</p>
<h2 id="CSS_Processing">CSS Processing</h2><p>Method <code>process(css, opts)</code> from Autoprefixer processor is a PostCSS’s method.</p>
<p>You must set <code>from</code> and <code>to</code> options with file names to generates corrects<br>source maps and useful error messages.</p>
<p>Options:</p>
<ul>
<li><code>from</code> (path): file path to origin CSS files.</li>
<li><code>to</code> (path): file path to future CSS file, which will<br>contain processed CSS with prefixes.</li>
<li><code>safe</code> (boolean): enables <a href="https://github.com/postcss/postcss#safe-mode">Safe Mode</a> in PostCSS. By default <code>false</code>.</li>
<li><p><code>map</code> contains options for source maps:</p>
<ul>
<li><code>inline: false</code> to force save map to separated file, instead of inline it<br>to CSS in special comment by base64.</li>
<li><code>prev</code> (string or object): map content from previous processing step<br>(like Sass compilation).</li>
</ul>
<p>If you set <code>map: false</code>, PostCSS will remove source map.</p>
</li>
</ul>
<p>You can read more about the source map options in <a href="https://github.com/postcss/postcss#source-map-1">PostCSS documentation</a>.</p>
<h2 id="PostCSS_Chain">PostCSS Chain</h2><p>You parse CSS only once and then process it through array of PostCSS processors.</p>
<p>For example, you can use <a href="https://github.com/w0rm/gulp-postcss">gulp-postcss</a>:</p>
<pre><code class="js"><span class="keyword">var</span> postcss    = <span class="built_in">require</span>(<span class="string">'gulp-postcss'</span>);
<span class="keyword">var</span> sourcemaps = <span class="built_in">require</span>(<span class="string">'gulp-sourcemaps'</span>);

gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
    <span class="keyword">var</span> processors = [
        <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(<span class="string">'last 1 version'</span>),
        <span class="built_in">require</span>(<span class="string">'css-mqpacker'</span>),
        <span class="built_in">require</span>(<span class="string">'csswring'</span>)
     ];
     <span class="keyword">return</span> gulp.src(<span class="string">'./src/style.css'</span>)
        .pipe(sourcemaps.init())
        .pipe(postcss(processors))
        .pipe(sourcemaps.write(<span class="string">'.'</span>))
        .pipe(gulp.dest(<span class="string">'./dest'</span>));
});
</code></pre>
<h2 id="Safe_Mode">Safe Mode</h2><p>PostCSS has a special safe mode to parse broken CSS. If you set the <code>safe: true</code><br>option to the <code>process</code> method, it will  parse <code>a {</code> as <code>a {}</code>:</p>
<pre><code class="js">autoprefixer.process(<span class="string">'a {'</span>);                 <span class="comment">// will throw “Unclosed block”</span>
autoprefixer.process(<span class="string">'a {'</span>, { safe: <span class="literal">true</span> }); <span class="comment">// will process as a closed block</span>
</code></pre>
<p>It is useful for legacy code when using several hacks, or interactive<br>tools with live input, like <a href="http://simevidas.jsbin.com/gufoko/quiet">Autoprefixer demo</a>.</p>
<h2 id="Cleaning">Cleaning</h2><p>By default, Autoprefixer not only add new prefixes, but also remove outdated.<br>You can remove this behaviour by <code>remove: false</code> option:</p>
<pre><code class="js">autoprefixer()
  .process(<span class="string">'a { -webkit-border-radius: 2px; border-radius: 2px }'</span>);
<span class="comment">// remove outdated -webkit-border-radius</span>

autoprefixer({ remove: <span class="literal">false</span> })
  .process(<span class="string">'a { -webkit-border-radius: 2px; border-radius: 2px }'</span>);
<span class="comment">// keeps -webkit-border-radius</span>
</code></pre>
<h2 id="Debug">Debug</h2><p>You can check which browsers are selected and which properties will be prefixed:</p>
<pre><code class="js">info = autoprefixer({ browsers: [<span class="string">'last 1 version'</span>] }).info();
<span class="built_in">console</span>.log(info);
</code></pre>
