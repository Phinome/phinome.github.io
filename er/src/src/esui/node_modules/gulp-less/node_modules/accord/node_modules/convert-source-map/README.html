<h1 id="convert-source-map">convert-source-map <a href="http://travis-ci.org/thlorenz/convert-source-map"><img src="https://secure.travis-ci.org/thlorenz/convert-source-map.png" alt="build status"></a></h1><p><a href="https://nodei.co/npm/convert-source-map/"><img src="https://nodei.co/npm/convert-source-map.png?downloads=true&amp;stars=true" alt="NPM"></a></p>
<p>Converts a source-map from/to  different formats and allows adding/changing properties.</p>
<pre><code class="js"><span class="keyword">var</span> convert = <span class="built_in">require</span>(<span class="string">'convert-source-map'</span>);

<span class="keyword">var</span> json = convert
  .fromComment(<span class="string">'//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9vLmpzIiwic291cmNlcyI6WyJjb25zb2xlLmxvZyhcImhpXCIpOyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIvIn0='</span>)
  .toJSON();

<span class="keyword">var</span> modified = convert
  .fromComment(<span class="string">'//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9vLmpzIiwic291cmNlcyI6WyJjb25zb2xlLmxvZyhcImhpXCIpOyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIvIn0='</span>)
  .setProperty(<span class="string">'sources'</span>, [ <span class="string">'CONSOLE.LOG("HI");'</span> ])
  .toJSON();

<span class="built_in">console</span>.log(json);
<span class="built_in">console</span>.log(modified);
</code></pre>
<pre><code class="json">{"<span class="attribute">version</span>":<span class="value"><span class="number">3</span></span>,"<span class="attribute">file</span>":<span class="value"><span class="string">"foo.js"</span></span>,"<span class="attribute">sources</span>":<span class="value">[<span class="string">"console.log(\"hi\");"</span>]</span>,"<span class="attribute">names</span>":<span class="value">[]</span>,"<span class="attribute">mappings</span>":<span class="value"><span class="string">"AAAA"</span></span>,"<span class="attribute">sourceRoot</span>":<span class="value"><span class="string">"/"</span></span>}
{"<span class="attribute">version</span>":<span class="value"><span class="number">3</span></span>,"<span class="attribute">file</span>":<span class="value"><span class="string">"foo.js"</span></span>,"<span class="attribute">sources</span>":<span class="value">[<span class="string">"CONSOLE.LOG(\"HI\");"</span>]</span>,"<span class="attribute">names</span>":<span class="value">[]</span>,"<span class="attribute">mappings</span>":<span class="value"><span class="string">"AAAA"</span></span>,"<span class="attribute">sourceRoot</span>":<span class="value"><span class="string">"/"</span></span>}
</code></pre>
<h2 id="API">API</h2><h3 id="fromObject(obj)">fromObject(obj)</h3><p>Returns source map converter from given object.</p>
<h3 id="fromJSON(json)">fromJSON(json)</h3><p>Returns source map converter from given json string.</p>
<h3 id="fromBase64(base64)">fromBase64(base64)</h3><p>Returns source map converter from given base64 encoded json string.</p>
<h3 id="fromComment(comment)">fromComment(comment)</h3><p>Returns source map converter from given base64 encoded json string prefixed with <code>//# sourceMappingURL=...</code>.</p>
<h3 id="fromMapFileComment(comment,_mapFileDir)">fromMapFileComment(comment, mapFileDir)</h3><p>Returns source map converter from given <code>filename</code> by parsing <code>//# sourceMappingURL=filename</code>.</p>
<p><code>filename</code> must point to a file that is found inside the <code>mapFileDir</code>. Most tools store this file right next to the<br>generated file, i.e. the one containing the source map.</p>
<h3 id="fromSource(source)">fromSource(source)</h3><p>Finds last sourcemap comment in file and returns source map converter or returns null if no source map comment was<br>found.</p>
<h3 id="fromMapFileSource(source,_mapFileDir)">fromMapFileSource(source, mapFileDir)</h3><p>Finds last sourcemap comment in file and returns source map converter or returns null if no source map comment was<br>found.</p>
<p>The sourcemap will be read from the map file found by parsing <code># sourceMappingURL=file</code> comment. For more info see<br>fromMapFileComment.</p>
<h3 id="toObject()">toObject()</h3><p>Returns a copy of the underlying source map.</p>
<h3 id="toJSON([space])">toJSON([space])</h3><p>Converts source map to json string. If <code>space</code> is given (optional), this will be passed to<br><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify</a> when the<br>JSON string is generated.</p>
<h3 id="toBase64()">toBase64()</h3><p>Converts source map to base64 encoded json string.</p>
<h3 id="toComment()">toComment()</h3><p>Converts source map to base64 encoded json string prefixed with <code>//# sourceMappingURL=...</code>.</p>
<h3 id="addProperty(key,_value)">addProperty(key, value)</h3><p>Adds given property to the source map. Throws an error if property already exists.</p>
<h3 id="setProperty(key,_value)">setProperty(key, value)</h3><p>Sets given property to the source map. If property doesnâ€™t exist it is added, otherwise its value is updated.</p>
<h3 id="getProperty(key)">getProperty(key)</h3><p>Gets given property of the source map.</p>
<h3 id="removeComments(src)">removeComments(src)</h3><p>Returns <code>src</code> with all source map comments removed</p>
<h3 id="removeMapFileComments(src)">removeMapFileComments(src)</h3><p>Returns <code>src</code> with all source map comments pointing to map files removed.</p>
<h3 id="commentRegex">commentRegex</h3><p>Returns the regex used to find source map comments.</p>
<h3 id="mapFileCommentRegex">mapFileCommentRegex</h3><p>Returns the regex used to find source map comments pointing to map files.</p>
<p><a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://d2weczhvl823v0.cloudfront.net/thlorenz/convert-source-map/trend.png" alt="Bitdeli Badge"></a></p>
