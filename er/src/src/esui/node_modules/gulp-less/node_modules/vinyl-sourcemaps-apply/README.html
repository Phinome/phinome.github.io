<h1 id="vinyl-sourcemaps-apply">vinyl-sourcemaps-apply</h1><p>Apply a source map to a vinyl file, merging it with preexisting source maps.</p>
<h2 id="Usage:">Usage:</h2><pre><code class="javascript"><span class="keyword">var</span> applySourceMap = <span class="built_in">require</span>(<span class="string">'vinyl-sourcemaps-apply'</span>);
applySourceMap(vinylFile, sourceMap);
</code></pre>
<h3 id="Example_(Gulp_plugin):">Example (Gulp plugin):</h3><pre><code class="javascript"><span class="keyword">var</span> through = <span class="built_in">require</span>(<span class="string">'through2'</span>);
<span class="keyword">var</span> applySourceMap = <span class="built_in">require</span>(<span class="string">'vinyl-sourcemaps-apply'</span>);
<span class="keyword">var</span> myTransform = <span class="built_in">require</span>(<span class="string">'myTransform'</span>);

<span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>{

  <span class="function"><span class="keyword">function</span> <span class="title">transform</span>(<span class="params">file, encoding, callback</span>) </span>{
    <span class="comment">// generate source maps if plugin source-map present</span>
    <span class="keyword">if</span> (file.sourceMap) {
      options.makeSourceMaps = <span class="literal">true</span>;
    }

    <span class="comment">// do normal plugin logic</span>
    <span class="keyword">var</span> result = myTransform(file.contents, options);
    file.contents = <span class="keyword">new</span> Buffer(result.code);

    <span class="comment">// apply source map to the chain</span>
    <span class="keyword">if</span> (file.sourceMap) {
      applySourceMap(file, result.map);
    }

    <span class="keyword">this</span>.push(file);
    callback();
  }

  <span class="keyword">return</span> through.obj(transform);
};
</code></pre>
