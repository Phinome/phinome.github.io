<h1 id="node-http-signature">node-http-signature</h1><p>node-http-signature is a node.js library that has client and server components<br>for Joyentâ€™s <a href="http_signing.md">HTTP Signature Scheme</a>.</p>
<h2 id="Usage">Usage</h2><p>Note the example below signs a request with the same key/cert used to start an<br>HTTP server. This is almost certainly not what you actually want, but is just<br>used to illustrate the API calls; you will need to provide your own key<br>management in addition to this library.</p>
<h3 id="Client">Client</h3><pre><code class="js"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);
<span class="keyword">var</span> https = <span class="built_in">require</span>(<span class="string">'https'</span>);
<span class="keyword">var</span> httpSignature = <span class="built_in">require</span>(<span class="string">'http-signature'</span>);

<span class="keyword">var</span> key = fs.readFileSync(<span class="string">'./key.pem'</span>, <span class="string">'ascii'</span>);

<span class="keyword">var</span> options = {
  host: <span class="string">'localhost'</span>,
  port: <span class="number">8443</span>,
  path: <span class="string">'/'</span>,
  method: <span class="string">'GET'</span>,
  headers: {}
};

<span class="comment">// Adds a 'Date' header in, signs it, and adds the</span>
<span class="comment">// 'Authorization' header in.</span>
<span class="keyword">var</span> req = https.request(options, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>{
  <span class="built_in">console</span>.log(res.statusCode);
});


httpSignature.sign(req, {
  key: key,
  keyId: <span class="string">'./cert.pem'</span>
});

req.end();
</code></pre>
<h3 id="Server">Server</h3><pre><code class="js"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);
<span class="keyword">var</span> https = <span class="built_in">require</span>(<span class="string">'https'</span>);
<span class="keyword">var</span> httpSignature = <span class="built_in">require</span>(<span class="string">'http-signature'</span>);

<span class="keyword">var</span> options = {
  key: fs.readFileSync(<span class="string">'./key.pem'</span>),
  cert: fs.readFileSync(<span class="string">'./cert.pem'</span>)
};

https.createServer(options, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>{
  <span class="keyword">var</span> rc = <span class="number">200</span>;
  <span class="keyword">var</span> parsed = httpSignature.parseRequest(req);
  <span class="keyword">var</span> pub = fs.readFileSync(parsed.keyId, <span class="string">'ascii'</span>);
  <span class="keyword">if</span> (!httpSignature.verifySignature(parsed, pub))
    rc = <span class="number">401</span>;

  res.writeHead(rc);
  res.end();
}).listen(<span class="number">8443</span>);
</code></pre>
<h2 id="Installation">Installation</h2><pre><code>npm <span class="keyword">install</span> http-signature
</code></pre><h2 id="License">License</h2><p>MIT.</p>
<h2 id="Bugs">Bugs</h2><p>See <a href="https://github.com/joyent/node-http-signature/issues">https://github.com/joyent/node-http-signature/issues</a>.</p>
