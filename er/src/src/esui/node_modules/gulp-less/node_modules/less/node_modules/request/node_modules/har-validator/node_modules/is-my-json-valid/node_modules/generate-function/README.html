<h1 id="generate-function">generate-function</h1><p>Module that helps you write generated functions in Node</p>
<pre><code>npm <span class="keyword">install</span> generate-<span class="keyword">function</span>
</code></pre><p><a href="http://travis-ci.org/mafintosh/generate-function"><img src="http://img.shields.io/travis/mafintosh/generate-function.svg?style=flat" alt="build status"></a></p>
<h2 id="Disclamer">Disclamer</h2><p>Writing code that generates code is hard.<br>You should only use this if you really, really, really need this for performance reasons (like schema validators / parsers etc).</p>
<h2 id="Usage">Usage</h2><pre><code class="js"><span class="keyword">var</span> genfun = <span class="built_in">require</span>(<span class="string">'generate-function'</span>)

<span class="keyword">var</span> addNumber = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>{
  <span class="keyword">var</span> fn = genfun()
    (<span class="string">'function add(n) {'</span>)
      (<span class="string">'return n + %d'</span>, val) <span class="comment">// supports format strings to insert values</span>
    (<span class="string">'}'</span>)

  <span class="keyword">return</span> fn.toFunction() <span class="comment">// will compile the function</span>
}

<span class="keyword">var</span> add2 = addNumber(<span class="number">2</span>)

<span class="built_in">console</span>.log(<span class="string">'1+2='</span>, add2(<span class="number">1</span>))
<span class="built_in">console</span>.log(add2.toString()) <span class="comment">// prints the generated function</span>
</code></pre>
<p>If you need to close over variables in your generated function pass them to <code>toFunction(scope)</code></p>
<pre><code class="js"><span class="keyword">var</span> multiply = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>{
  <span class="keyword">return</span> a * b
}

<span class="keyword">var</span> addAndMultiplyNumber = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>{
  <span class="keyword">var</span> fn = genfun()
    (<span class="string">'function(n) {'</span>)
      (<span class="string">'if (typeof n !== "number") {'</span>) <span class="comment">// ending a line with { will indent the source</span>
        (<span class="string">'throw new Error("argument should be a number")'</span>)
      (<span class="string">'}'</span>)
      (<span class="string">'var result = multiply(%d, n+%d)'</span>, val, val)
      (<span class="string">'return result'</span>)
    (<span class="string">'}'</span>)

  <span class="comment">// use fn.toString() if you want to see the generated source</span>

  <span class="keyword">return</span> fn.toFunction({
    multiply: multiply
  })
}

<span class="keyword">var</span> addAndMultiply2 = addAndMultiplyNumber(<span class="number">2</span>)

<span class="built_in">console</span>.log(<span class="string">'(3 + 2) * 2 ='</span>, addAndMultiply2(<span class="number">3</span>))
</code></pre>
<h2 id="Related">Related</h2><p>See <a href="https://github.com/mafintosh/generate-object-property">generate-object-property</a> if you need to safely generate code that<br>can be used to reference an object property</p>
<h2 id="License">License</h2><p>MIT</p>
