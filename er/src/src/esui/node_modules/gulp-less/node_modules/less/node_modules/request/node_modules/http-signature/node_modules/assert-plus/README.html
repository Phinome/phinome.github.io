<h1 id="node-assert-plus">node-assert-plus</h1><p>This library is a super small wrapper over node’s assert module that has two<br>things: (1) the ability to disable assertions with the environment variable<br>NODE_NDEBUG, and (2) some API wrappers for argument testing.  Like<br><code>assert.string(myArg, &#39;myArg&#39;)</code>.  As a simple example, most of my code looks<br>like this:</p>
<pre><code>var assert = <span class="literal">require</span>(<span class="string">'assert-plus'</span>);

function fooAccount(<span class="literal">options</span>, <span class="keyword">callback) {</span>
    assert.object(<span class="literal">options</span>, <span class="string">'options'</span>);
    assert.number(<span class="literal">options</span>.<span class="built_in">id</span>, <span class="string">'options.id);
    assert.bool(options.isManager, '</span><span class="literal">options</span>.isManager<span class="string">');
    assert.string(options.name, '</span><span class="literal">options</span>.<span class="literal">name</span><span class="string">');
    assert.arrayOfString(options.email, '</span><span class="literal">options</span>.email<span class="string">');
    assert.func(callback, '</span>callback<span class="string">');

    // Do stuff
    callback(null, {});
}</span>
</code></pre><h1 id="API">API</h1><p>All methods that <em>aren’t</em> part of node’s core assert API are simply assumed to<br>take an argument, and then a string ‘name’ that’s not a message; <code>AssertionError</code><br>will be thrown if the assertion fails with a message like:</p>
<pre><code>AssertionError: foo (string) is required
at test (/home/mark/work/foo/foo<span class="class">.js</span>:<span class="number">3</span>:<span class="number">9</span>)
at Object.&lt;anonymous&gt; (/home/mark/work/foo/foo<span class="class">.js</span>:<span class="number">15</span>:<span class="number">1</span>)
at Module._compile (module<span class="class">.js</span>:<span class="number">446</span>:<span class="number">26</span>)
at Object.<span class="class">.js</span> (module<span class="class">.js</span>:<span class="number">464</span>:<span class="number">10</span>)
at Module<span class="class">.load</span> (module<span class="class">.js</span>:<span class="number">353</span>:<span class="number">31</span>)
at Function._load (module<span class="class">.js</span>:<span class="number">311</span>:<span class="number">12</span>)
at Array.<span class="number">0</span> (module<span class="class">.js</span>:<span class="number">484</span>:<span class="number">10</span>)
at EventEmitter._tickCallback (node<span class="class">.js</span>:<span class="number">190</span>:<span class="number">38</span>)
</code></pre><p>from:</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">(foo)</span></span> {
    <span class="built_in">assert</span>.<span class="built_in">string</span>(foo, <span class="string">'foo'</span>);
}
</code></pre><p>There you go.  You can check that arrays are of a homogenous type with <code>Arrayof$Type</code>:</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">(foo)</span></span> {
    <span class="built_in">assert</span>.arrayOfString(foo, <span class="string">'foo'</span>);
}
</code></pre><p>You can assert IFF an argument is not <code>undefined</code> (i.e., an optional arg):</p>
<pre><code><span class="keyword">assert</span>.optionalString(foo, <span class="string">'foo'</span>);
</code></pre><p>Lastly, you can opt-out of assertion checking altogether by setting the<br>environment variable <code>NODE_NDEBUG=1</code>.  This is pseudo-useful if you have<br>lots of assertions, and don’t want to pay <code>typeof ()</code> taxes to v8 in<br>production.</p>
<p>The complete list of APIs is:</p>
<ul>
<li>assert.bool</li>
<li>assert.buffer</li>
<li>assert.func</li>
<li>assert.number</li>
<li>assert.object</li>
<li>assert.string</li>
<li>assert.arrayOfBool</li>
<li>assert.arrayOfFunc</li>
<li>assert.arrayOfNumber</li>
<li>assert.arrayOfObject</li>
<li>assert.arrayOfString</li>
<li>assert.optionalBool</li>
<li>assert.optionalBuffer</li>
<li>assert.optionalFunc</li>
<li>assert.optionalNumber</li>
<li>assert.optionalObject</li>
<li>assert.optionalString</li>
<li>assert.optionalArrayOfBool</li>
<li>assert.optionalArrayOfFunc</li>
<li>assert.optionalArrayOfNumber</li>
<li>assert.optionalArrayOfObject</li>
<li>assert.optionalArrayOfString</li>
<li>assert.AssertionError</li>
<li>assert.fail</li>
<li>assert.ok</li>
<li>assert.equal</li>
<li>assert.notEqual</li>
<li>assert.deepEqual</li>
<li>assert.notDeepEqual</li>
<li>assert.strictEqual</li>
<li>assert.notStrictEqual</li>
<li>assert.throws</li>
<li>assert.doesNotThrow</li>
<li>assert.ifError</li>
</ul>
<h1 id="Installation">Installation</h1><pre><code><span class="label">npm</span> install <span class="preprocessor">assert</span>-plus
</code></pre><h2 id="License">License</h2><p>The MIT License (MIT)<br>Copyright (c) 2012 Mark Cavage</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of<br>this software and associated documentation files (the “Software”), to deal in<br>the Software without restriction, including without limitation the rights to<br>use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of<br>the Software, and to permit persons to whom the Software is furnished to do so,<br>subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all<br>copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE<br>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,<br>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE<br>SOFTWARE.</p>
<h2 id="Bugs">Bugs</h2><p>See <a href="https://github.com/mcavage/node-assert-plus/issues">https://github.com/mcavage/node-assert-plus/issues</a>.</p>
