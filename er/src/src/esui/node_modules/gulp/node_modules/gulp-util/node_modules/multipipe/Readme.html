<h1 id="multipipe">multipipe</h1><p>A better <code>Stream#pipe</code> that creates duplex streams and lets you handle errors in one place.</p>
<p><a href="http://travis-ci.org/segmentio/multipipe"><img src="https://secure.travis-ci.org/segmentio/multipipe.png" alt="build status"></a></p>
<h2 id="Example">Example</h2><pre><code class="js"><span class="keyword">var</span> pipe = <span class="built_in">require</span>(<span class="string">'multipipe'</span>);

<span class="comment">// pipe streams</span>
<span class="keyword">var</span> stream = pipe(streamA, streamB, streamC);

<span class="comment">// centralized error handling</span>
stream.on(<span class="string">'error'</span>, fn);

<span class="comment">// creates a new stream</span>
source.pipe(stream).pipe(dest);

<span class="comment">// optional callback on finish or error</span>
pipe(streamA, streamB, streamC, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>{
  <span class="comment">// ...</span>
});
</code></pre>
<h2 id="Duplex_streams">Duplex streams</h2><p>  Write to the pipe and you’ll really write to the first stream, read from the pipe and you’ll read from the last stream.</p>
<pre><code class="js"><span class="keyword">var</span> stream = pipe(a, b, c);

source
  .pipe(stream)
  .pipe(destination);
</code></pre>
<p>  In this example the flow of data is:</p>
<ul>
<li>source -&gt;</li>
<li>a -&gt;</li>
<li>b -&gt;</li>
<li>c -&gt;</li>
<li>destination</li>
</ul>
<h2 id="Error_handling">Error handling</h2><p>  Each <code>pipe</code> forwards the errors the streams it wraps emit, so you have one central place to handle errors:</p>
<pre><code class="js"><span class="keyword">var</span> stream = pipe(a, b, c);

stream.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>{
  <span class="comment">// called three times</span>
});

a.emit(<span class="string">'error'</span>, <span class="keyword">new</span> <span class="built_in">Error</span>);
b.emit(<span class="string">'error'</span>, <span class="keyword">new</span> <span class="built_in">Error</span>);
c.emit(<span class="string">'error'</span>, <span class="keyword">new</span> <span class="built_in">Error</span>);
</code></pre>
<h2 id="API">API</h2><h3 id="pipe(stream,_…)">pipe(stream, …)</h3><p>Pass a variable number of streams and each will be piped to the next one.</p>
<p>A stream will be returned that wraps passed in streams in a way that errors will be forwarded and you can write to and/or read from it.</p>
<p>Pass a function as last argument to be called on <code>error</code> or <code>finish</code> of the last stream.</p>
<h2 id="Installation">Installation</h2><pre><code class="bash">$ npm install multipipe
</code></pre>
<h2 id="License">License</h2><p>The MIT License (MIT)</p>
<p>Copyright (c) 2014 Segment.io Inc. &lt;friends@segment.io&gt;<br>Copyright (c) 2014 Julian Gruber &lt;julian@juliangruber.com&gt;</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy<br>of this software and associated documentation files (the “Software”), to deal<br>in the Software without restriction, including without limitation the rights<br>to use, copy, modify, merge, publish, distribute, sublicense, and/or sell<br>copies of the Software, and to permit persons to whom the Software is<br>furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in<br>all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE<br>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,<br>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN<br>THE SOFTWARE.</p>
