<h1 id="interpret">interpret</h1><blockquote>
<p>A dictionary of file extensions and associated module loaders.</p>
</blockquote>
<p><a href="https://nodei.co/npm/interpret/"><img src="https://nodei.co/npm/interpret.png" alt="NPM"></a></p>
<h2 id="What_is_it">What is it</h2><p>This is used by <a href="http://github.com/tkellen/node-liftoff">Liftoff</a> to automatically require dependencies for configuration files, and by <a href="http://github.com/tkellen/node-rechoir">rechoir</a> for registering module loaders.</p>
<h2 id="API">API</h2><h3 id="extensions">extensions</h3><p>Map file types to modules which provide a <a href="http://nodejs.org/api/globals.html#globals_require_extensions">require.extensions</a> loader.</p>
<pre><code class="js">{
  <span class="string">'.cjsx'</span>: <span class="string">'node-cjsx/register'</span>,
  <span class="string">'.co'</span>: <span class="string">'coco'</span>,
  <span class="string">'.coffee'</span>: <span class="string">'coffee-script/register'</span>,
  <span class="string">'.coffee.md'</span>: <span class="string">'coffee-script/register'</span>,
  <span class="string">'.csv'</span>: <span class="string">'require-csv'</span>,
  <span class="string">'.iced'</span>: <span class="string">'iced-coffee-script/register'</span>,
  <span class="string">'.iced.md'</span>: <span class="string">'iced-coffee-script/register'</span>,
  <span class="string">'.ini'</span>: <span class="string">'require-ini'</span>,
  <span class="string">'.js'</span>: <span class="literal">null</span>,
  <span class="string">'.json'</span>: <span class="literal">null</span>,
  <span class="string">'.json5'</span>: <span class="string">'json5/lib/require'</span>,
  <span class="string">'.jsx'</span>: <span class="string">'node-jsx'</span>,
  <span class="string">'.litcoffee'</span>: <span class="string">'coffee-script/register'</span>,
  <span class="string">'.liticed'</span>: <span class="string">'iced-coffee-script/register'</span>,
  <span class="string">'.ls'</span>: <span class="string">'livescript'</span>,
  <span class="string">'.toml'</span>: <span class="string">'toml-require'</span>,
  <span class="string">'.ts'</span>: <span class="string">'typescript-require'</span>,
  <span class="string">'.xml'</span>: <span class="string">'require-xml'</span>,
  <span class="string">'.yaml'</span>: <span class="string">'require-yaml'</span>,
  <span class="string">'.yml'</span>: <span class="string">'require-yaml'</span>
}
</code></pre>
<h3 id="register">register</h3><p>Check here to see if setup is needed for the module register itself with <a href="http://nodejs.org/api/globals.html#globals_require_extensions">require.extensions</a>.  If a method is returned, call it with the module.</p>
<pre><code class="js">{
  <span class="string">'toml-require'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">module</span>) </span>{
    <span class="built_in">module</span>.install();
  }
}
</code></pre>
<h3 id="jsVariants">jsVariants</h3><p>Extensions which are javascript variants.</p>
<pre><code class="js">{
  <span class="string">'.cjsx'</span>: <span class="string">'node-cjsx/register'</span>,
  <span class="string">'.js'</span>: <span class="literal">null</span>,
  <span class="string">'.co'</span>: <span class="string">'coco'</span>,
  <span class="string">'.coffee'</span>: <span class="string">'coffee-script/register'</span>,
  <span class="string">'.coffee.md'</span>: <span class="string">'coffee-script/register'</span>,
  <span class="string">'.iced'</span>: <span class="string">'iced-coffee-script/register'</span>,
  <span class="string">'.iced.md'</span>: <span class="string">'iced-coffee-script/register'</span>,
  <span class="string">'.jsx'</span>: <span class="string">'node-jsx'</span>,
  <span class="string">'.litcoffee'</span>: <span class="string">'coffee-script/register'</span>,
  <span class="string">'.liticed'</span>: <span class="string">'iced-coffee-script/register'</span>,
  <span class="string">'.ls'</span>: <span class="string">'livescript'</span>,
  <span class="string">'.ts'</span>: <span class="string">'typescript-require'</span>
}
</code></pre>
<h3 id="Example_Usage">Example Usage</h3><pre><code class="js"><span class="keyword">const</span> interpret = <span class="built_in">require</span>(<span class="string">'interpret'</span>);
<span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);
<span class="keyword">const</span> resolve = <span class="built_in">require</span>(<span class="string">'resolve'</span>);

<span class="comment">// register support for a defined extension</span>
<span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params">filepath, cwd</span>) </span>{
  <span class="comment">// find the extension of the requested filename</span>
  <span class="keyword">var</span> ext = path.extname(filepath);
  <span class="comment">// see if this extension is already supported</span>
  <span class="keyword">if</span> (<span class="built_in">Object</span>.keys(<span class="built_in">require</span>.extensions).indexOf(ext) !== -<span class="number">1</span>) {
    <span class="keyword">return</span>;
  }
  <span class="comment">// if no cwd is specified, assume we want to use the</span>
  <span class="comment">// directory the requested file exists in</span>
  <span class="keyword">if</span> (!cwd) {
    cwd = path.dirname(path.resolve(filepath));
  }
  <span class="comment">// find out which module is needed to read this extension</span>
  <span class="keyword">var</span> moduleName = interpret.extensions[ext];
  <span class="comment">// if a module exists for this extension, make it usable</span>
  <span class="keyword">if</span> (moduleName) {
    <span class="comment">// find the module relative to cwd that can add support for this extension</span>
    <span class="keyword">var</span> <span class="built_in">module</span> = resolve.sync(moduleName, {basedir: cwd})
    <span class="comment">// require it</span>
    <span class="keyword">var</span> compiler = <span class="built_in">require</span>(<span class="built_in">module</span>);
    <span class="comment">// see if there is a method needed beyond requiring to enable support</span>
    <span class="keyword">var</span> register = interpret.register[moduleName];
    <span class="comment">// if there is, run it</span>
    <span class="keyword">if</span> (register) {
      register(compiler);
    }
  }
}
</code></pre>
<p>Note: this is more or less exactly how <a href="http://github.com/tkellen/node-rechoir">rechoir</a> works.</p>
