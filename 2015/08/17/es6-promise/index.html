<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>es6-promise | Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="上周在小团队内部分享了一下阅读ES6中Promise迷你书后的收获。后来忙着做项目，另外也是没有写作思路，因此也就没有没有及时总结，今天蹭着写作的这点动力，赶紧写点文字。
说到 Promise 首先反应的其实是 Deferred ，因为这个概念在 jQuery 1.5+ 就引入了。而那时候其实 Ecmascript 社区里还没有 Promise 啥事儿，至少不像现在这般受到重视。至于后来为啥广泛被">
<meta property="og:type" content="article">
<meta property="og:title" content="es6-promise">
<meta property="og:url" content="http://blog.supertree.me/2015/08/17/es6-promise/index.html">
<meta property="og:site_name" content="Blog">
<meta property="og:description" content="上周在小团队内部分享了一下阅读ES6中Promise迷你书后的收获。后来忙着做项目，另外也是没有写作思路，因此也就没有没有及时总结，今天蹭着写作的这点动力，赶紧写点文字。
说到 Promise 首先反应的其实是 Deferred ，因为这个概念在 jQuery 1.5+ 就引入了。而那时候其实 Ecmascript 社区里还没有 Promise 啥事儿，至少不像现在这般受到重视。至于后来为啥广泛被">
<meta property="og:updated_time" content="2015-08-17T15:35:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="es6-promise">
<meta name="twitter:description" content="上周在小团队内部分享了一下阅读ES6中Promise迷你书后的收获。后来忙着做项目，另外也是没有写作思路，因此也就没有没有及时总结，今天蹭着写作的这点动力，赶紧写点文字。
说到 Promise 首先反应的其实是 Deferred ，因为这个概念在 jQuery 1.5+ 就引入了。而那时候其实 Ecmascript 社区里还没有 Promise 啥事儿，至少不像现在这般受到重视。至于后来为啥广泛被">
  
    <link rel="alternative" href="/atom.xml" title="Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://tp2.sinaimg.cn/1849036501/180/40051849094/1" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">phinome</a></h1>
		</hgroup>

		
		<p class="header-subtitle">supertree.me</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="http://weibo.com/phinome/" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="https://github.com/Phinome" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/2014/" style="font-size: 10px;">2014</a> <a href="/tags/Object-c/" style="font-size: 10px;">Object-c</a> <a href="/tags/Promise/" style="font-size: 20px;">Promise</a> <a href="/tags/Promise-A/" style="font-size: 10px;">Promise/A+</a> <a href="/tags/RAP/" style="font-size: 15px;">RAP</a> <a href="/tags/Sass/" style="font-size: 10px;">Sass</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/compass/" style="font-size: 10px;">compass</a> <a href="/tags/deferred/" style="font-size: 10px;">deferred</a> <a href="/tags/devTools/" style="font-size: 10px;">devTools</a> <a href="/tags/echarts/" style="font-size: 10px;">echarts</a> <a href="/tags/es6/" style="font-size: 20px;">es6</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/xcode/" style="font-size: 10px;">xcode</a> <a href="/tags/个人小结/" style="font-size: 10px;">个人小结</a> <a href="/tags/总结/" style="font-size: 10px;">总结</a> <a href="/tags/感悟/" style="font-size: 15px;">感悟</a> <a href="/tags/漫谈/" style="font-size: 10px;">漫谈</a> <a href="/tags/生活/" style="font-size: 10px;">生活</a> <a href="/tags/程序人生/" style="font-size: 10px;">程序人生</a> <a href="/tags/重构/" style="font-size: 10px;">重构</a> <a href="/tags/项目总结/" style="font-size: 10px;">项目总结</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">不要因为也许会改变，就不肯说那句美丽的誓言，不要因为也许会分离，就不敢求一次倾心的相遇。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">phinome</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://tp2.sinaimg.cn/1849036501/180/40051849094/1" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">phinome</h1>
			</hgroup>
			
			<p class="header-subtitle">supertree.me</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="http://weibo.com/phinome/" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="https://github.com/Phinome" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-es6-promise" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/17/es6-promise/" class="article-date">
  	<time datetime="2015-08-17T14:08:27.000Z" itemprop="datePublished">Aug 17 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      es6-promise
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Promise/">Promise</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Promise-A/">Promise/A+</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/es6/">es6</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Promise/">Promise</a><a class="article-category-link" href="/categories/Promise/es6/">es6</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上周在小团队内部分享了一下阅读ES6中Promise迷你书后的收获。后来忙着做项目，另外也是没有写作思路，因此也就没有没有及时总结，今天蹭着写作的这点动力，赶紧写点文字。</p>
<p>说到 Promise 首先反应的其实是 Deferred ，因为这个概念在 jQuery 1.5+ 就引入了。而那时候其实 Ecmascript 社区里还没有 Promise 啥事儿，至少不像现在这般受到重视。至于后来为啥广泛被认可，乃至今日成为规范，这个我没有详细去考究。</p>
<p>自从异步编程在 javascript 中火热起来，在给我们带来异步编程乐趣的同时也伴随着回调嵌套过深，不能捕获异步错误和返回值的问题，不仅使得异步代码写的难看，更为重要的是给维护者和debug带来了灾难。技术的发展就是这样，当一种技术遇到自身的瓶颈时，人们就会寻找或者发明另一种技术来弥补或取代。So, Promise 就是这种角色。</p>
<p>ES6 参照了 <a href="https://promisesaplus.com/" target="_blank" rel="external">Promises/A+</a> 规范对 Promise 的实现做出了规范，而本文的内容也就围绕着 ES6 中的 Promise 展开。</p>
<p>提到 Promise 就不得不首先说说 Promise 里的三种状态：</p>
<ul>
<li>Pending</li>
<li>Fulfilled</li>
<li>Rejected</li>
</ul>
<p>关于这三种状态的定义规范里有详细的定义，我就偷个懒：</p>
<blockquote>
<p>Any Promise object is in one of three mutually exclusive states: fulfilled, rejected, and pending:</p>
<ul>
<li>A promise p is fulfilled if p.then(f, r) will immediately enqueue a Job to call the function f.</li>
<li>A promise p is rejected if p.then(f, r) will immediately enqueue a Job to call the function r.</li>
<li>A promise is pending if it is neither fulfilled nor rejected.</li>
</ul>
<p>A promise is said to be settled if it is not pending, i.e. if it is either fulfilled or rejected.</p>
</blockquote>
<p>关于状态有一个很关键的词就是：不可逆。当 <code>Promise</code> 对象由 <code>pending</code> 转换到 <code>fulfilled</code> 或者 <code>rejected</code> 状态后，便不能再发生逆转换，即由：<code>fulfilled</code> ==&gt; <code>pending</code> 或者 <code>rejected</code> ==&gt; <code>pending</code>。而当状态不处于 <code>pending</code> 时，我们可以说 <code>promise</code> 对象是<code>settled</code>的。</p>
<p>OK，说完状态，来接着说说 Promise 对象的 API 。规范中定义了三种API。即：</p>
<ul>
<li>Constructor Method</li>
<li>Instance Method</li>
<li>Static Method</li>
</ul>
<p>首先来看看 <code>Constructor Method</code> :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(executor);</span><br></pre></td></tr></table></figure>
<p>这里有个引起重视的地方是，<code>executor</code> 必须是 <em>callable</em> 也就是说必须是个 <code>Function</code> 。否则，浏览器会抛出错误。</p>
<p>废话不多说了，直接上ES6规范：</p>
<blockquote>
<p>When the Promise function is called with argument executor the following steps are taken:</p>
<ol>
<li>If NewTarget is <code>undefined</code>, throw a <code>TypeError exception</code>.</li>
<li><p>If <code>IsCallable(executor)</code> is false, throw a <code>TypeError exception</code>.</p>
<p> 此处省略若干字…</p>
</li>
</ol>
<p>11.Return promise.</p>
<p>NOTE: </p>
<p>The <code>executor</code> argument must be a function object. It is called for initiating and reporting completion of the possibly deferred action represented by this Promise object. The executor is called with two arguments: resolve and reject. These are functions that may be used by the executor function to report eventual completion or failure of the deferred computation. Returning from the executor function does not mean that the deferred action has been completed but only that the request to eventually perform the deferred action has been accepted.</p>
</blockquote>
<p>看完规范，记住就好了，初始化一个 <code>Promise</code> 对象时记得传个 <code>Function</code> 进去。</p>
<p>其次，来说说 <code>Instance Method</code>:</p>
<ul>
<li>then</li>
</ul>
<p><code>Promise</code> 对象的实例就只有一个方法，接收两个参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line">p.then(onFulfilled , onRejected) &#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ol>
<li><code>&#39;Function&#39; === typeof (onFulfilled &amp;&amp; onRejected)</code> ，那么 <code>p.then</code> 返回一个新的 <code>promise</code>。</li>
<li>当<code>onFulfilled</code>不是函数且<code>onRejected</code>未定义的时候，此时有一个<code>Promise穿透</code>的概念。即：当前的 <code>then</code> 不会处理<code>Promise</code> 而会直接传递给下一个。</li>
<li>当<code>onFulfilled</code>不是函数且<code>onRejected</code>为函数的时候，此时就只定义了<code>Recjeted</code>时的处理，其实也就相当于 <code>catch</code> 方法。</li>
</ol>
<p>最后来聊聊<code>Static Method</code>方法：</p>
<ul>
<li>Promise.resolve()</li>
<li>Promise.reject()</li>
<li>Promise.all([promise], function(res) {})</li>
<li>Promise.race([promise], function(res) {})</li>
</ul>
<p><code>Promise.resolve</code> 和 <code>Promise.resolve</code> 可以看作是 <code>new Promise(function(resolve) {})</code> 或者 <code>new Promise(function(undefined, reject) {})</code> 的快捷方式（语法糖？）。这里主要讲讲 <code>Promise.all</code>，<code>Promise.race</code> 的用法以及区别。先上代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all</span><br><span class="line"></span><br><span class="line"><span class="comment">// `delay`毫秒后执行resolve</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timerPromisefy</span>(<span class="params">delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            resolve(delay);</span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> startDate = <span class="built_in">Date</span>.now();</span><br><span class="line"><span class="comment">// 所有promise变为resolve后程序退出</span></span><br><span class="line"><span class="built_in">Promise</span>.all([</span><br><span class="line">    timerPromisefy(<span class="number">1</span>),</span><br><span class="line">    timerPromisefy(<span class="number">32</span>),</span><br><span class="line">    timerPromisefy(<span class="number">64</span>),</span><br><span class="line">    timerPromisefy(<span class="number">128</span>)</span><br><span class="line">]).then(<span class="function"><span class="keyword">function</span> (<span class="params">values</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">Date</span>.now() - startDate + <span class="string">'ms'</span>);</span><br><span class="line">    <span class="comment">// 約128ms</span></span><br><span class="line">    <span class="built_in">console</span>.log(values);    <span class="comment">// [1,32,64,128]</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.race</span><br><span class="line"></span><br><span class="line"><span class="comment">// `delay`毫秒后执行resolve</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timerPromisefy</span>(<span class="params">delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            resolve(delay);</span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 任何一个promise变为resolve或reject 的话程序就停止运行</span></span><br><span class="line"><span class="built_in">Promise</span>.race([</span><br><span class="line">    timerPromisefy(<span class="number">1</span>),</span><br><span class="line">    timerPromisefy(<span class="number">32</span>),</span><br><span class="line">    timerPromisefy(<span class="number">64</span>),</span><br><span class="line">    timerPromisefy(<span class="number">128</span>)</span><br><span class="line">]).then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);    <span class="comment">// =&gt; 1</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>看代码就能清晰吧，我就不多说了。</p>
<p>灵感榨干了，今天就先这样。</p>
<p>最后附上分享的PPT(PDF)版了，Keynote 暂时不传。</p>
<p><a href="http://vdisk.weibo.com/s/d2Q1GY4DKjq5" target="_blank" rel="external">ES6-Promise</a></p>
<p>参考网址：</p>
<ul>
<li><a href="http://www.ecma-international.org/ecma-262/6.0/" target="_blank" rel="external">es6 specs</a></li>
<li><a href="https://promisesaplus.com/" target="_blank" rel="external">Promises/A+</a></li>
</ul>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2015/06/26/项目总结（一）/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">项目总结（一）</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="es6-promise" data-title="es6-promise" data-url="http://blog.supertree.me/2015/08/17/es6-promise/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 phinome
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-46029102-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<!-- Baidu Analytics -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ce55b8a7119a41fa6055c280b46b8725";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!-- End Baidu Analytics -->




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>